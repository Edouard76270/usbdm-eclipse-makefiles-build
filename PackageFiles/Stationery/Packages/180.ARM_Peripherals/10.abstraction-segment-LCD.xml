<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE root SYSTEM "../package.dtd"
>

<root version="1.0">
   <projectActionList id="abstraction-segment-lcd">
      <applyWhen>
         <and>
            <variableRef idRef="outputType" condition="matches" value=".*ProjectType\.exe$" />
            <or>
               <deviceSubfamilyIs>MKL43Z4</deviceSubfamilyIs>
               <deviceSubfamilyIs>MKL46Z4</deviceSubfamilyIs>
            </or>
         </and>
      </applyWhen>

      <variable id="projectOptionValue.abstraction-segment-lcd"
         name="Segment LCD" description="Adds an interface for the onboard segment LCD" checkGroup="group-peripheral-options" />

      <projectActionList>
         <applyWhen>
            <and>
               <deviceSubfamilyIs>MKL43Z4</deviceSubfamilyIs>
               <variableRef idRef="projectOptionValue.abstraction-segment-lcd" />
            </and>
         </applyWhen>
         <createFolder target="Snippets" />
         <excludeSourceFolder target="Snippets" />
         <copy source="Snippets/segment-lcd-example.cpp"   target="Snippets/segment-lcd-example.cpp" />
         <copy source="Project_Headers/Segment_LCD.h"      target="Project_Headers/Segment_LCD.h" />
         <copy source="Sources/Segment_LCD-MKL43Z4.c"      target="Sources/Segment_LCD.c" />
      </projectActionList>

      <projectActionList>
         <applyWhen>
            <and>
               <deviceSubfamilyIs>MKL46Z4</deviceSubfamilyIs>
               <variableRef idRef="projectOptionValue.abstraction-segment-lcd" />
            </and>
         </applyWhen>
         <createFolder target="Snippets" />
         <excludeSourceFolder target="Snippets" />
         <copy source="Snippets/segment-lcd-example.cpp"  target="Snippets/segment-lcd-example.cpp" />
         <copy source="Project_Headers/Segment_LCD.h"     target="Project_Headers/Segment_LCD.h" />
         <copy source="Sources/Segment_LCD-MKL46Z4.c"     target="Sources/Segment_LCD.c" />
      </projectActionList>
   </projectActionList>
</root>

<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE root SYSTEM "../package.dtd"
[
<!ENTITY DEVICE_SUB_FAMILY  "MK">
<!ENTITY FILE_NAME          "Generic-MK">
]>

<root version="1.0" >
   <projectActionList id="CPP-abstraction-&DEVICE_SUB_FAMILY;">
      <applyWhen>
         <and>
            <deviceSubfamilyMatches>&DEVICE_SUB_FAMILY;.*</deviceSubfamilyMatches>
            <variableRef idRef="hasCCNature" condition="isTrue" />
            <not><variableRef idRef="projectOptionValue.CPP-abstraction" condition="isDefined" /></not>
         </and>
      </applyWhen>

      <variable id="projectOptionValue.CPP-abstractionX" 
         name="Base CPP Hardware abstraction (&DEVICE_SUB_FAMILY; family)" 
         description="Adds a CPP abstraction layer for hardware\n(GPIO) - &DEVICE_SUB_FAMILY;"
         checkGroup="group-additional-options" />
      <projectActionList>
         <applyWhen >
            <variableRef idRef="projectOptionValue.CPP-abstractionX" />
         </applyWhen>

<!--
         <projectOption id="net.sourceforge.usbdm.cdt.toolchain.optimization.level" config="debug">
            <value>net.sourceforge.usbdm.gnu.c.optimization.level.optimize</value>
         </projectOption>
-->
         <!-- Definitions used by example program -->
         <constant id="demo.cpp.red.led"            value="LED_RED" />
         <constant id="demo.cpp.green.led"          value="LED_GREEN" />
         <constant id="demo.cpp.blue.led"           value="LED_BLUE" />
         <constant id="demo.cpp.external.switch"    value="PTA0" />
         <constant id="demo.cpp.external.led"       value="PTA1" />

         <deleteResource target="Project_Headers/Board_LEDs.h" />
         <deleteResource target="Project_Headers/leds.h" />
         <deleteResource target="Sources/leds.c" />
         <deleteResource target="Sources/main.c" />
         <deleteResource target="Sources/main.cpp" />
         <createFolder   target="Snippets" />
         <copy source="Snippets/digital-example1.cpp"                      target="Snippets/digital-example1.cpp" />
         <copy source="Snippets/digital-example2.cpp"                      target="Snippets/digital-example2.cpp" />
         <copy source="Project_Headers/gpio-Generic.h"                     target="Project_Headers/gpio.h" />
         <copy source="Project_Headers/gpio_defs-&DEVICE_SUB_FAMILY;.h"    target="Project_Headers/gpio_defs.h" />
         <copy source="Project_Headers/pin_mapping-&FILE_NAME;.h"          target="Project_Headers/pin_mapping.h" />
         <copy source="Sources/main-basic.cpp"                             target="Sources/main.cpp" replace="true" />
         <excludeSourceFolder target="Snippets" />
      </projectActionList>
   </projectActionList>
</root>

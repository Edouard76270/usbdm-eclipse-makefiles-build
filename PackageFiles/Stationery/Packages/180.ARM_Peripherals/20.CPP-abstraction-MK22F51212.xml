<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE root SYSTEM "../package.dtd"
[
<!ENTITY DEVICE_SUB_FAMILY  "MK22F51212">
<!ENTITY DEVICE_FAMILY      "MK">
]>

<root version="1.0" >
   <projectActionList id="CPP-abstraction-&DEVICE_SUB_FAMILY;">
      <applyWhen>
         <and>
            <deviceSubfamilyIs>&DEVICE_SUB_FAMILY;</deviceSubfamilyIs>
            <variableRef idRef="hasCCNature" condition="isTrue" />
         </and>
      </applyWhen>

      <!-- These constant enables peripheral features -->
      <constant id="demo.cpp.peripheral.i2c"    value="true" />
      <constant id="demo.cpp.peripheral.lptmr"  value="true" />
      <constant id="demo.cpp.peripheral.pit"    value="true" />
      <constant id="demo.cpp.peripheral.spi"    value="true" />
      <constant id="demo.cpp.peripheral.lcd"    value="true" />

      <variable id="projectOptionValue.CPP-abstraction" 
         name="CPP Hardware abstraction" 
         description="Adds a CPP abstraction layer for hardware\n(GPIO, ADC, PWM)"
         checkGroup="group-additional-options" />
      <projectActionList>
         <applyWhen >
            <variableRef idRef="projectOptionValue.CPP-abstraction" />
         </applyWhen>

         <!-- Definitions used by example program -->
         <constant id="demo.cpp.red.led"            value="PTA1" />
         <constant id="demo.cpp.green.led"          value="PTA2" />
         <constant id="demo.cpp.blue.led"           value="PTD5" />
         <constant id="demo.cpp.joystick.x"         value="A2" />
         <constant id="demo.cpp.joystick.y"         value="A1" />
         <constant id="demo.cpp.joystick.z"         value="A0" />
         <constant id="demo.cpp.external.switch"    value="D12" />
         <constant id="demo.cpp.external.led"       value="D13" />
         <constant id="demo.cpp.lcd.spi"            value="SPI_1" />
         <constant id="demo.cpp.magnetometer.i2c"   value="I2C_0" />
         <constant id="demo.cpp.accelerometer.i2c"  value="I2C_0" />

         <deleteResource target="Project_Headers/Board_LEDs.h" />
         <deleteResource target="Project_Headers/leds.h" />
         <deleteResource target="Sources/leds.c" />
         <deleteResource target="Sources/main.c" />
         <copy source="Project_Headers/examples.h"                         target="Project_Headers/examples.h" />
         <copy source="Project_Headers/gpio-&DEVICE_SUB_FAMILY;.h"         target="Project_Headers/gpio.h" />
         <copy source="Project_Headers/gpio_defs-&DEVICE_FAMILY;.h"        target="Project_Headers/gpio_defs.h" />
         <copy source="Project_Headers/pin_mapping-&DEVICE_SUB_FAMILY;.h"  target="Project_Headers/pin_mapping.h" />
         <copy source="Sources/gpio-&DEVICE_SUB_FAMILY;.cpp"               target="Sources/gpio.cpp" />
         <copy source="Sources/main-MK.cpp"                                target="Sources/main.cpp" replace="true" />
      </projectActionList>
   </projectActionList>
</root>
